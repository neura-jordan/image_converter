#include <cstdint>
#include <fstream>
#include <iostream>
#include <vector>

void createTestPng(const std::string &filename) {
  // 1x1 Red Pixel PNG (Non-interlaced, Truecolor, 8-bit)
  // Signature + IHDR + IDAT + IEND
  const std::vector<uint8_t> pngData = {
      0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, // Signature

      // IHDR (13 bytes)
      0x00, 0x00, 0x00, 0x0D, // Length
      0x49, 0x48, 0x44, 0x52, // Type
      0x00, 0x00, 0x00, 0x01, // Width: 1
      0x00, 0x00, 0x00, 0x01, // Height: 1
      0x08, 0x02, 0x00, 0x00,
      0x00, // Depth: 8, Color: 2 (RGB), Comp: 0, Filt: 0, Inter: 0
      0x90, 0x77, 0x53, 0xDE, // CRC

      // IDAT Chunk
      // Valid 1x1 Red Pixel IDAT content (Zlib wrapped):
      // 78 9C 63 F8 CF C0 00 00 03 01 01 00
      0x00, 0x00, 0x00, 0x0C, // Length: 12
      0x49, 0x44, 0x41, 0x54, // Type
      0x78, 0x9C, 0x63, 0xF8, 0xCF, 0xC0, 0x00, 0x00, 0x03, 0x01, 0x01, 0x00,
      0x06, 0x53, 0x37, 0xF9, // CRC of IDAT

      // IEND
      0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82};

  std::ofstream file(filename, std::ios::binary);
  file.write(reinterpret_cast<const char *>(pngData.data()), pngData.size());
  std::cout << "Created test PNG: " << filename << std::endl;
}

int main() {
  createTestPng("test.png");
  return 0;
}
